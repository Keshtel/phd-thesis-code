First:
conda activate SAMPt
then run:
python app.py
and copy the address you get in the browser

movies with mp4 format work better than avi. devide movies into multiple sections of 30 MB or less using resizing and other preprocess
for converting avi or mp4 to format readable by Fiji use this command:
ffmpeg -i Behavior_17.mp4  -c:v rawvideo -pix_fmt yuv420p 'Behavior_17.avi'

1- For better result in sam first devide your avi video into enough partitions (10 or 20 or more) s.t. each partition is at most 30 MB: PreProcess_files.ipynb
2- for using sam, you have to annotate the first frame, if the first frame is too blurred or the worm is not visible, you can choose 5-10 good middle frames in the video file and add it to the beginning of the video using AddFr_toVideo.ipynb

3- After running SAM, you can use roll back options to make the tracking better by annotating some middle frames too. 
4- finally put results of SAM for different partitions in one folder. you can use move_directories.sh to delete useless subdirectories of the result file generated by sam.

./move_directories.sh 'Directory_containing_SAM_output_folders' 'Directory_of_moving_relevant_subfolders_in_SAM_output' name_base_of_videos

5- After getting the result, go over folders and delete the extra frames if you added any in step 2. Maybe save that which folder had how many extra frame for later reference
6- Collect masks in different folders and renumber them.
place all folders containing png sam masks in another folder in alphabetical order. The CollectMasks.ipynb script collect the results from different folders, renumbers them and put them in a new target folder. Check the number of png file in the new target folder is similar to the frames of the movie.

Use Merge_samWmediar.ipynb if you want to delete some component or mix results of two different methods
